# 更新日志

## 2026.01.14

1. 书影音提供图片上传功能，避免年末复盘手动处理图片和分享图 ✅、

---

## 2025.12.30

1. 分享功能添加，方便做年度复盘 

   - 跑步计划进展可分享
   - 运动日历 拆分 年度、月度，并可分享
   - 书籍、电影添加年度划分，并可分享

---

## 2025.12.08

1. 复盘(日报、周报、月报)增强

   - 提供按钮进行上/下周期的切换
   - 周报概念更新为【双周报】作为执行复盘的最小周期
   - 月报概念更新为【周期报】， 2-3 周期一复盘，替代季报作为年度变化的维度依赖，同时提供不偏移年度计划的方向调整（事项、心态、计划）
   - 需求8 完成 ✅

---

## 2025.11.16

1. 需求8 计划：提供运动记录、管理的界面呈现方式，方便打卡和管理

   - 运动分为多个类别，从有氧、徒步/爬山、抗阻训练、跑步(跑步计划)
     - 快捷记录：和每日记录的运动记录同时作为记录运动的入口
     - 运动概览：展示当前运动容量入口、日历组件展示当前打卡节奏
     - 跑步计划进度追踪：便于对热爱的跑步运动进行规划和执行
     - 运动记录罗列

2. 全局添加交互友好，便于使用 

   - 提供正向反馈，添加累计时长展示
   - 移除工作模式相关内容，实际使用中将工作也列为需要处理的场景
   - 每日记录添加工作节点，用于高效管控下班后的时间节奏

---

## 2025.08.17

1. 实际使用中交互优化 (重点记录)

   - TED 界面操作复制优化，方便每日复盘
   - 周报起止时间添加配置入口

---

## 2025.07.26

1. 周报 AI 工具无法满足当前写周报需求 -> 改为 部分数据组装+部分AI推论（只处理学习和工作）

   - 数据组装 睡眠：入睡时间和起床时间特殊处理(因为经常熬夜)，计算平均睡眠时长

2. 月报页面改版 需求 7 完成 ✅

   - 季报计划：月报改版后，实行2-3个月，再完善季报
     - 季报尝试解决的问题：对齐年报、季节性规律调整、方法论沉淀、认知突破总结

---

## 2025.06.28

大虐，由于 5月加班非常严重 + 6月初阳一直在睡觉，功能进展较缓慢

- 需求4：LTN做题 Deepseek 查询 已接入 ✅
- 需求5：TED、电影/书籍 相关记录界面 已支持 ✅
- 需求6：每日做题记录、隔天错题重做 已支持 ✅

**新需求：**

- 需求7计划：月报优化，从「数据陈列」到「驱动行动」的转变

  - 月报当前痛点：像是多个周报的数据集合，缺乏跨周期的洞察、战略层提炼

  - 月报优化方向：从数据中提取模式，推动系统性改进 + 输出非短期任务的决策

    - 【顶部】趋势变化分析

      1. 不同类型的热力图 （过滤了 工作 和 睡眠）

         - 工作：是不得不投入时间用于赚钱的 - 通过文档、月计划整理工作与我而言可控
         - 睡眠：会影响直观地观察 各个事项在周期中的热力情况

      2. 学习效率曲线 

         - 分母 times 定义：工作日 下班时间-23:00；休息日 LTN/前端>30min，事项开始时间-23:00，不包含其他事项时间
         - 时段系数：工作日下班 1.2，周末 0.9；LTN 1.2 前端 1.0
         - 日学习效率分 = (LTN分钟数 \times*1.2 + 前端分钟数 \times) *时段系数

      3. 【由上述两项数据推论】归因挖掘

         - 退步：计划不合理？执行漏洞/干扰事项？
         - 进步：哪些方法论可以复用到其他方向

    - 【中间】环比数据 

      - 年度目标计算

        除去工作：52周 * 2天周末/周 * 4h + 52周 * 5天工作日/周*2h = 936h = 56160m

        - 学习专注时长：【暂时规划一半】56160m / 2 ≈ 25000m
        - LTN做题时长：【暂时规划一半】56160m / 2 ≈ 25000m
        - 复盘时长：365天 * 0.5h + 周报 2h * 36h + 月报 1h * 12 = 266h = 15960m
        - 技术占比【暂缓】
        - TED观看时长：365 * 1/3 * 15min = 1825m
        - 阅读时长：365 * 10min = 3650m / 2（上半年几乎没记录阅读时长）
        - 平均入睡时间：环比展示
        - 平均起床时间：环比展示
        - 运动时长：52周 * 5天 * 30m = 7800m

      - 时长差异的原因

    - 【底部】非短期决策 

      - 保持原有周事项罗列
      - 保持：哪些已验证的有效模式
      - 试验：迁移有用的学习方法
      - 放弃：哪些事情看似重要，但无实际回报
      - 偏离：时间投入占比是否偏离重点

---

## 2025.04.20

从去年9月起的所有做题历史记录导入 mongodb

---

## 2025.04.13

- 需求3：提供做题界面 + 做题时间 + 做题时长 ✅

**功能梳理：前端视角需要的接口信息记录**

- 点开弹窗，调用①初始化接口：判断是否展示正确答案界面 
  - 不展示就停，等做题 
  - 展示则将接口中查询的剩余信息展示 
- 做完题，点击校验，调用校验接口：需要调用2个接口
  - ②post 接口用于存储最新一次做题答案，同时返回需要展示的数据 
  - ③AI 查询当前输入的内容 和 正确答案的 错误信息分析、推论 
- ④保存：可以填写修改 历史错误信息 + 做题时长，点击保存按钮，将数据落表 
  - 刷新做题时间 + 模拟之前 Box 的升降功能（页面升降入口关闭）

```js
// 核心 两个 mongodb 表
// 正确答案记录表，唯一查询: topicId
question_answers: {
    rightAnswer: string; // 正确答案
    wrongNotes: string; // 错误记录
    topicTitle: string;
    topicId: number; // 关联 MySQL
}
// 做题记录表，唯一查询: topicId+submitTime
answer_records: {
    topicTitle: string;
  durationSec: number; // 做题时长
  submitTime: string; // 提交时间（和 mysql 中的 solveTime 对齐）
  topicId: number;
  isCorrect: boolean; // 升/降BOx
  recentAnswer: string; // 最近一次的答案
}
// 做题界面 - ③AI 校验返回的信息使用另一个接口异步返回（一般比较慢）
{
    suggesttion: [] //不落表
}
```

---

## 2025.04.08

哭泣，找房子、搬家、加班，终于有时间把清明节安排的 LTN 优化方案实践了

- 需求2：mongodb 管理 题目答案（弹窗手动添加/修改） ✅

---

## 2025.04.04

- 需求1：添加表 level + 给所有题目定级(借助 AI) 并更新间隔时间 ✅

```json
// 题目答案主文档（答案唯一性）
{
    _id: ObjectId("5f8d..."), // MongoDB自动生成
    topic_id: 123,            // 关联题目ID
    topic_title: "React Fiber架构原理", 
    right_answer: "答案",
    wrong_notes: ["❌错误1", "❌错误2"] ,
    create_at: ISODate("2025-04-01"),
    update_at: ISODate("2025-04-10")
}
// 做题记录子文档（独立集合）
{
    _id: ObjectId("5f8e..."),
    topic_id: 123,             // 外键关联
    duration_ms: 45000,        // 本次耗时(毫秒)
    is_correct: false,         // 是否正确
    wrong_reason: "误解了双缓冲机制", // 错误摘要
    created_at: ISODate("2025-04-05T10:00:00"), 
}
```

---

## 2025.03.29

- 方案确定，如 v2.0 的描述，每日复盘提供 工作模式/自学模式 的切换

---

## 2025.03.02

- Next_pro 的所有后端接口，添加权限校验 - 全局中间件

---

## 2025.03.01

- Next_pro 的 `DEEPSEEK_API_KEY` 存储在服务器 config.env 中统一管理
- Next_pro 的 deepseek 的 AI 提示语存储在 config.env 中

---

## 2025.02.28

- Next_Pro 调通本地的 AI 调用提示 月报总结信息

---

## 2025.02.17

- Next_Pro 添加二次阅读工具页面

---

## 2025.02.14

- Next_Pro 修改手机端样式

---

## 2025.02.13

- Next_Pro 在服务器部署 mysql，修改代码根据环境适配

---

## 2025.02.12

- Next_Pro 月报
- Next_Pro 初始化部署

**部署指令操作：**

1. 更新 Next_Pro 代码
   - <https://gitee.com/CodingWithAlice/Next_Pro> 更新
   - 方便国内 git pull 拉取

2. 在 Next_Pro 目录构建：

```bash
sudo docker build -t next_pro .
```

- 本地 npm run build 确认没有问题
- => => writing image sha256:32f2351a67a8c4704e94e42177f64cdb1e16aa7d1e9eb4bb2c59c3d8ac2c3440
- => => naming to docker.io/library/next_pro 212.7s

3. 启动服务：

```bash
sudo docker run -d -p 3000:3000 next_pro
```

- 查看运行中的容器

  ```bash
  sudo docker ps
  ```

  如果 找到对应 IMAGES + STATUS为 up 即成功

- 查看容器日志 `sudo docker logs next_pro` 获取日志
- 检查端口占用情况 `sudo netstat -tuln | grep :3000` 检查主机的 3000 端口是否被监听
  (启动后， 在防火墙配置开放该端口 3000 的入站规则)

**访问链接：**

- <http://121.43.164.209:3000>
- <http://codingwithalice.top:3000/>

---

## 2025.02.10

- Next_Pro 周报 数据源 modal+页面展示，并投入使用写 LTN15周报

---

## 2025.01.27

- Next_Pro 周报 查询 + 落表 + 展示

---

## 2025.01.26

- Next_Pro 每日数据 接口+展示

---

## 2025.01.21

- Next_Pro 日报 事项记录 前后端+数据库

---

## 2025.01.15

Next_Pro 日报落表 - 时间周期落表
